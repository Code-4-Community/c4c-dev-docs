


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.7">
    
    
      
        <title>SFTT API Specification - C4C Dev Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.b8ac9624.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sftt-api-specification" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="C4C Dev Docs" class="md-header-nav__button md-logo" aria-label="C4C Dev Docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            C4C Dev Docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              SFTT API Specification
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/Code-4-Community/c4c-dev-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../llb/" class="md-tabs__link">
          Lucy's Love Bus
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../" class="md-tabs__link md-tabs__link--active">
          Speak for the Trees
        </a>
      
    </li>
  

      
        
      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="C4C Dev Docs" class="md-nav__button md-logo" aria-label="C4C Dev Docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    C4C Dev Docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/Code-4-Community/c4c-dev-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../mkdocs-starter/" title="MkDocs" class="md-nav__link">
      MkDocs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Lucy's Love Bus
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Lucy's Love Bus" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Lucy's Love Bus
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../llb/" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../llb/llb-api-spec/" title="LLB API Specification" class="md-nav__link">
      LLB API Specification
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../llb/llb-auth-api/" title="Login and Token Endpoints" class="md-nav__link">
      Login and Token Endpoints
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Speak for the Trees
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Speak for the Trees" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Speak for the Trees
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        SFTT API Specification
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="SFTT API Specification" class="md-nav__link md-nav__link--active">
      SFTT API Specification
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#privilege-levels" class="md-nav__link">
    Privilege Levels
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sftt-auth-api/" title="Login and Token Endpoints" class="md-nav__link">
      Login and Token Endpoints
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../api-spec-example/" title="API Spec Example" class="md-nav__link">
      API Spec Example
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#privilege-levels" class="md-nav__link">
    Privilege Levels
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/Code-4-Community/c4c-dev-docs/edit/master/docs/sftt/sftt-api-spec.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="sftt-api-specification">SFTT API Specification</h1>
<p>In every request header is a JWT. The JWT will contain the user's id value and the user's privilege level.</p>
<h2 id="privilege-levels">Privilege Levels</h2>
<ul>
<li><code>0</code> = untrusted user</li>
<li><code>1</code> = a regular user</li>
<li><code>2</code> = an admin user</li>
</ul>
<p>It is assumed that the user making the request (as specified in the JWT header) is the person the block is being reserved / completed by.</p>
<h1 id="block-status-updates">Block Status Updates</h1>
<h2 id="post-apiv1protectedblocksreserve"><code>POST api/v1/protected/blocks/reserve</code></h2>
<p>Open -&gt; Reserved</p>
<p>Must be called on open blocks.</p>
<ol>
<li>Update DB, add blocks to a user's assigned blocks</li>
<li>Call map API and update status of blocks to reserved</li>
</ol>
<h2 id="post-apiv1protectedblocksfinish"><code>POST api/v1/protected/blocks/finish</code></h2>
<p>Reserved -&gt; Done</p>
<p>Whoever had the block in it's current reserve is the one who is credited with completion.</p>
<p>Must be called by an admin or by the person holding the block.</p>
<h2 id="post-apiv1protectedblocksrelease"><code>POST api/v1/protected/blocks/release</code></h2>
<p>Reserved -&gt; Open</p>
<p>Must be called by an admin or by the person holding the block.</p>
<h2 id="post-apiv1protectedblocksreset"><code>POST api/v1/protected/blocks/reset</code></h2>
<p>Done -&gt; Open</p>
<p>Admin Only</p>
<h3 id="reserve-finish-release-and-reset-share-the-same-request-bodies-and-possible-responses">reserve, finish, release, and reset share the same request bodies and possible responses.</h3>
<h3 id="request-body">Request Body</h3>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;blocks&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;block_id STRING&quot;</span><span class="p">,</span>
    <span class="err">...</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<p>The block id will correspond to the fid of a block stored in the ArcGIS map.</p>
<h3 id="responses">Responses</h3>
<p>Partial successes are possible.</p>
<p>Reasons a block may fail:
- The block was not in the state that it should've been
- The user is not allowed to modify that block's state
- The fid doesn't match any block</p>
<h5 id="200-ok"><code>200 OK</code></h5>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;successes&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;block_id STRING&quot;</span><span class="p">,</span>
    <span class="err">...</span>
  <span class="p">],</span>
  <span class="nt">&quot;failures&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;block_id STRING&quot;</span><span class="p">,</span>
    <span class="err">...</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<h5 id="401-unauthorized"><code>401 Unauthorized</code></h5>
<p>The calling user was not an admin (reset only)</p>
<h2 id="post-apiv1protectedblocksreserveadmin"><code>POST api/v1/protected/blocks/reserve/admin</code></h2>
<p>Open -&gt; Reserved</p>
<p>Admin Only</p>
<p>Can specify a specific user that a block is being assigned to.</p>
<h3 id="request-body_1">Request Body</h3>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;assigned_to&quot;</span><span class="p">:</span> <span class="s2">&quot;user_id STRING&quot;</span><span class="p">,</span>
  <span class="nt">&quot;blocks&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;block_id STRING&quot;</span><span class="p">,</span>
    <span class="err">...</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="responses_1">Responses</h3>
<h5 id="200-ok_1"><code>200 OK</code></h5>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;successes&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;block_id STRING&quot;</span><span class="p">,</span>
    <span class="err">...</span>
  <span class="p">],</span>
  <span class="nt">&quot;failures&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;block_id STRING&quot;</span><span class="p">,</span>
    <span class="err">...</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<h5 id="400-bad-request"><code>400 BAD REQUEST</code></h5>
<p>The body was malformed or the specified user doesn't exist.</p>
<h5 id="401-unauthorized_1"><code>401 Unauthorized</code></h5>
<p>The calling user was not an admin.</p>
<h1 id="team-management">Team Management</h1>
<p>Members of a team have roles specified in the following table:</p>
<table>
<thead>
<tr>
<th>Role Name</th>
<th>teamRole</th>
</tr>
</thead>
<tbody>
<tr>
<td>NONE</td>
<td>0</td>
</tr>
<tr>
<td>MEMBER</td>
<td>1</td>
</tr>
<tr>
<td>LEADER</td>
<td>2</td>
</tr>
<tr>
<td>PENDING</td>
<td>3</td>
</tr>
</tbody>
</table>
<h2 id="post-teams"><code>POST /teams</code></h2>
<p>Create a team. The team will only contain the member that created it who is now specified as the team leader.</p>
<h3 id="request">Request</h3>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
  <span class="nt">&quot;bio&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
  <span class="nt">&quot;goal&quot;</span><span class="p">:</span> <span class="err">INT</span>
  <span class="s2">&quot;goalCompletionDate&quot;</span><span class="p">:</span> <span class="err">DATE</span><span class="p">,</span>
  <span class="nt">&quot;inviteEmails&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="err">STRING</span><span class="p">,</span>
    <span class="err">...</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<p>Goal is a number of blocks the team would like to complete by the goalCompleteDate. inviteEmails are a list of emails that that should be sent an invitation email to join the team. The team leader's email should not be included. This acts functionally the same as the <code>/teams/:team_id/invite</code> route.</p>
<h3 id="response">Response</h3>
<h5 id="200-ok_2"><code>200 OK</code></h5>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
  <span class="nt">&quot;bio&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
  <span class="nt">&quot;goal&quot;</span> <span class="err">INT</span><span class="p">,</span>
  <span class="nt">&quot;goalCompleteDate&quot;</span><span class="p">:</span> <span class="err">DATE</span><span class="p">,</span>
  <span class="nt">&quot;blocksCompleted&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
  <span class="nt">&quot;blocksReserved&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
  <span class="nt">&quot;applicantsToReview&quot;</span><span class="p">:</span> <span class="err">BOOLEAN</span><span class="p">,</span>
  <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
      <span class="nt">&quot;blocksCompleted&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;blocksReserved&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;teamRole&quot;</span><span class="p">:</span> <span class="err">INT</span>
    <span class="p">},</span>
    <span class="err">...</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div>

<p>This is the same as the JSON returned for <code>GET /teams/:team_id</code></p>
<h2 id="post-teamsteam_idinvite"><code>POST /teams/:team_id/invite</code></h2>
<p>Invite someone to join a team. Will send an email to all specified people that includes a link. Link will direct them to the team page where they can join once they are authenticated.</p>
<h3 id="request_1">Request</h3>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;invites&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
      <span class="nt">&quot;email&quot;</span> <span class="err">STRING</span>
    <span class="p">},</span>
    <span class="err">...</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="post-teamsteam_idapply"><code>POST /teams/:team_id/apply</code></h2>
<p>Apply to join this team. Any member can apply to join a team that they are not currently on. They will have to be approved by the team leader before becoming an actual member of the team.</p>
<h3 id="request_2">Request</h3>
<p>No request body.</p>
<h2 id="get-teamsteam_idapplicants"><code>GET /teams/:team_id/applicants</code></h2>
<p>Team Leader only.</p>
<p>Get the info for anyone that has requested to join this team in a list.</p>
<h3 id="responses_2">Responses</h3>
<h5 id="200-ok_3"><code>200 OK</code></h5>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;applicants&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;userId&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="err">...</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="post-teamsteam_idapplicantsuser_idapprove"><code>POST /teams/:team_id/applicants/:user_id/approve</code></h2>
<p>Team Leader only.</p>
<p>Approve this applicant's request to join the team. The user_id will be the same as the id returned in the GET applicants API call.</p>
<h3 id="request_3">Request</h3>
<p>No Request body</p>
<h3 id="responses_3">Responses</h3>
<h5 id="200-ok_4"><code>200 OK</code></h5>
<p>This member has joined the team.</p>
<h5 id="400-bad-request_1"><code>400 BAD REQUEST</code></h5>
<p>If the team or request specified in the id is invalid OR the user that had created the request no longer exists.</p>
<h2 id="post-teamsteam_idapplicantsuser_idreject"><code>POST /teams/:team_id/applicants/:user_id/reject</code></h2>
<p>Team Leader only.</p>
<p>Reject this applicant's request to join the team. The user_id will be the same as the id returned in the GET applicants API call.</p>
<h3 id="request_4">Request</h3>
<p>No Request body</p>
<h3 id="responses_4">Responses</h3>
<h5 id="200-ok_5"><code>200 OK</code></h5>
<p>This applicant has been removed from the applicant's list.</p>
<h5 id="400-bad-request_2"><code>400 BAD REQUEST</code></h5>
<p>If the team or request specified in the id is invalid OR the user that had created the request no longer exists.</p>
<h2 id="post-teamsteam_idleave"><code>POST /teams/:team_id/leave</code></h2>
<p>Leave this team that you are a part of. Cannot be called by the leader of the team.</p>
<h3 id="request_5">Request</h3>
<p>No request body.</p>
<h2 id="post-teamsteam_iddisband"><code>POST /teams/:team_id/disband</code></h2>
<p>Disband this team. Leader only. The team will be removed from the public team list and all other members will now be free to join or create a different team.</p>
<h3 id="request_6">Request</h3>
<p>No request body.</p>
<h2 id="post-teamsteam_idmembersmember_idkick"><code>POST /teams/:team_id/members/:member_id/kick</code></h2>
<p>Kicks a member off this team. Leader only. That member is then allowed to join or create any team now.</p>
<h3 id="request_7">Request</h3>
<p>No request body.</p>
<h2 id="post-teamsteam_idtransfer_ownership"><code>POST /teams/:team_id/transfer_ownership</code></h2>
<p>Update the team leader. Can only be called by the current leader of the given team.</p>
<h3 id="request_8">Request</h3>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;newLeaderId&quot;</span><span class="p">:</span> <span class="err">INT</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="responses_5">Responses</h3>
<h5 id="200-ok_6"><code>200 OK</code></h5>
<p>Success.</p>
<h5 id="400-bad-request_3"><code>400 Bad Request</code></h5>
<p>If the given user ID does not exist, or if the given user is not on the team.</p>
<h5 id="401-unauthorized_2"><code>401 Unauthorized</code></h5>
<p>If the requesting user is not the team leader.</p>
<h1 id="team-and-leaderboard-data">Team and Leaderboard Data</h1>
<h2 id="get-teams"><code>GET /teams</code></h2>
<p>Gets a list of teams, names, member count.</p>
<h3 id="responses_6">Responses</h3>
<h5 id="200-ok_7"><code>200 OK</code></h5>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;teams&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
      <span class="nt">&quot;memberCount&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;userTeamRole&quot;</span><span class="p">:</span> <span class="err">TEAM_ROLE</span>
    <span class="p">},</span>
    <span class="err">...</span>
  <span class="p">],</span>
  <span class="nt">&quot;rowCount&quot;</span><span class="p">:</span> <span class="err">INT</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="get-teamsadmin"><code>GET /teams/admin</code></h2>
<p>Gets a list of teams with their goal data.</p>
<h3 id="responses_7">Responses</h3>
<h5 id="200-ok_8"><code>200 OK</code></h5>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;teams&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
      <span class="nt">&quot;goalCompletionDate&quot;</span><span class="p">:</span> <span class="err">TIMESTAMP</span><span class="p">,</span>
      <span class="nt">&quot;blocksCompleted&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;blocksReserved&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;goal&quot;</span><span class="p">:</span> <span class="err">INT</span>
    <span class="p">},</span>
    <span class="err">...</span>
  <span class="p">],</span>
  <span class="nt">&quot;rowCount&quot;</span><span class="p">:</span> <span class="err">INT</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="get-teamsteam_id"><code>GET /teams/:team_id</code></h2>
<p>Gets the information for this specific team. Including the members with how many blocks each one has completed and reserved.</p>
<h3 id="responses_8">Responses</h3>
<h5 id="200-ok_9"><code>200 OK</code></h5>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
  <span class="nt">&quot;bio&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
  <span class="nt">&quot;goal&quot;</span> <span class="err">INT</span><span class="p">,</span>
  <span class="nt">&quot;goalCompleteDate&quot;</span><span class="p">:</span> <span class="err">DATE</span><span class="p">,</span>
  <span class="nt">&quot;blocksCompleted&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
  <span class="nt">&quot;blocksReserved&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
  <span class="nt">&quot;userTeamRole&quot;</span><span class="p">:</span> <span class="err">TEAM_ROLE</span><span class="p">,</span>
  <span class="nt">&quot;applicantsToReview&quot;</span><span class="p">:</span> <span class="err">BOOLEAN</span><span class="p">,</span>
  <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
      <span class="nt">&quot;blocksCompleted&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;blocksReserved&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;teamRole&quot;</span><span class="p">:</span> <span class="err">INT</span>
    <span class="p">},</span>
    <span class="err">...</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div>

<p>The <code>members</code> list is sorted in descending order of number of blocks completed.</p>
<p><code>teamRole</code> is an indicator of the member's role on the team. Currently there are only two roles: general member and team leader.</p>
<p><code>applicantsToReview</code> is a flag that there are people that have applied to the team that the team leader has to review. This will always be false if a non-leader calls this route.</p>
<h2 id="get-apiv1protectedteamsexport"><code>GET /api/v1/protected/teams/export</code></h2>
<p>Export Teams and User information. This is an admin-only route.
Returns a <code>text/cvs</code> response that includes
every team name, the goal and goal completion date of the team,
the time the team was created, every member of each team,
the team role of each member, the number of blocks
reserved and completed by each user on a team.</p>
<h3 id="responses_9">Responses</h3>
<h5 id="200-ok_10"><code>200 OK</code></h5>
<div class="highlight"><pre><span></span><code>STRING,STRING,STRING,...
STRING,STRING,STRING,...
...
</code></pre></div>

<h2 id="get-blocks"><code>GET /blocks</code></h2>
<p>Gets blocks done, in progress, todo for all of Boston</p>
<h3 id="responses_10">Responses</h3>
<h5 id="200-ok_11"><code>200 OK</code></h5>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;blocksCompleted&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
  <span class="nt">&quot;blocksReserved&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
  <span class="nt">&quot;blocksOpen&quot;</span><span class="p">:</span> <span class="err">INT</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="get-blocksleaderboard"><code>GET /blocks/leaderboard</code></h2>
<p>Gets blocks completed leaderboard for both teams and individuals. Will include up-to the top 10 teams and the top 10 individuals</p>
<h3 id="responses_11">Responses</h3>
<h5 id="200-ok_12"><code>200 OK</code></h5>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;teams&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
      <span class="nt">&quot;blocksCompleted&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;blocksReserved&quot;</span><span class="p">:</span> <span class="err">INT</span>
    <span class="p">},</span>
    <span class="err">...</span>
  <span class="p">],</span>
  <span class="nt">&quot;individuals&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
      <span class="nt">&quot;blocksCompleted&quot;</span><span class="p">:</span> <span class="err">INT</span><span class="p">,</span>
      <span class="nt">&quot;blocksReserved&quot;</span><span class="p">:</span> <span class="err">INT</span>
    <span class="p">},</span>
    <span class="err">...</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="get-apiv1protectedblocksreserved"><code>GET api/v1/protected/blocks/reserved</code></h2>
<p>Gets all blocks that are <code>assigned_to</code> the current user that have a status of
<code>RESERVED</code>. Including the optional query parameter <code>done=true</code> will <em>also</em>
return all blocks that have a status of <code>DONE</code>. Returns a list of <code>block.fid</code>.</p>
<h3 id="responses_12">Responses</h3>
<h5 id="200-ok_13"><code>200 OK</code></h5>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
    <span class="err">STRING</span><span class="p">,</span>
    <span class="err">STRING</span><span class="p">,</span>
    <span class="err">...</span>
<span class="p">]</span>
</code></pre></div>

<h2 id="get-apiv1protectedblocksreservedadmin"><code>GET api/v1/protected/blocks/reserved/admin</code></h2>
<p>Gets all blocks that have a status of <code>RESERVED</code>, in descending order of reservation date. Can only be called by admins.</p>
<h3 id="responses_13">Responses</h3>
<h5 id="200-ok_14"><code>200 OK</code></h5>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;blocks&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;fid&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
            <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
            <span class="nt">&quot;dateUpdated&quot;</span><span class="p">:</span> <span class="err">TIMESTAMP</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="err">...</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="get-apiv1protectedblocksdoneadmin"><code>GET api/v1/protected/blocks/done/admin</code></h2>
<p>Gets all blocks that have a status of <code>DONE</code>, in descending order of completion date. Can only be called by admins.</p>
<h3 id="responses_14">Responses</h3>
<h5 id="200-ok_15"><code>200 OK</code></h5>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;blocks&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;fid&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
            <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="err">STRING</span><span class="p">,</span>
            <span class="nt">&quot;dateUpdated&quot;</span><span class="p">:</span> <span class="err">TIMESTAMP</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="err">...</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="get-apiv1protectedblocksexport"><code>GET /api/v1/protected/blocks/export</code></h2>
<p>Export Block and User/Team information. This is an admin-only route.
Returns a <code>text/csv</code> response that includes
every block number, the status of the block,
the user that is associated with it (first name, last name, email, username),
the time it last updated, and the names of the teams the user is currently on.</p>
<h3 id="responses_15">Responses</h3>
<h5 id="200-ok_16"><code>200 OK</code></h5>
<div class="highlight"><pre><span></span><code>STRING,STRING,STRING,...
STRING,STRING,STRING,...
...
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../" title="Home" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Home
              </div>
            </div>
          </a>
        
        
          <a href="../sftt-auth-api/" title="Login and Token Endpoints" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Login and Token Endpoints
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.d1f5a259.min.js"></script>
      <script src="../../assets/javascripts/bundle.d5fec882.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.fae956e7.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>